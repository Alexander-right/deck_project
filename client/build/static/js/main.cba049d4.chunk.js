(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{115:function(e,t,a){},125:function(e,t,a){},126:function(e,t,a){},127:function(e,t,a){},128:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(29),c=a.n(o),s=(a(66),a(4)),i=a(5),l=a(8),u=a(7),p=a(12),d=(a(71),a(72),a(14));a(73);var m=function(){return r.a.createElement("ul",{className:"navigation"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(d.b,{to:"/Home"},"\u0413\u043b\u0430\u0432\u043d\u0430\u044f")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(d.b,{to:"/Application"},"\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(d.b,{to:"/Logg"},"\u0412\u043e\u0439\u0442\u0438")))},h=a(1),g=(new(function(){function e(){Object(s.a)(this,e),this.authenticated=!1}return Object(i.a)(e,[{key:"login",value:function(){this.authenticated=!0}},{key:"logout",value:function(){this.authenticated=!1}},{key:"isAuthenticated",value:function(){return this.authenticated}}]),e}()),function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"\u0414\u043e\u043c\u0430\u0448\u043d\u044f\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430"),r.a.createElement("span",null,"\u0414\u0430\u043d\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0443\u0447\u0435\u0431\u043d\u044b\u043c."))}),f=a(6),v=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={login:"",password:""},n.SendRequest=n.SendRequest.bind(Object(f.a)(n)),n.HandleChange=n.HandleChange.bind(Object(f.a)(n)),n}return Object(i.a)(a,[{key:"SendRequest",value:function(e){e.preventDefault();var t=this.props.type,a=this.props.Auth,n=this.props.SetLogin,r=new XMLHttpRequest;r.open("POST","/api/v1/".concat(this.props.type),!0),console.log(this.props.type),r.setRequestHeader("Content-Type","application/json"),r.onreadystatechange=function(){if(4===this.readyState)if(200===this.status){if("authorization"===t)try{console.log(JSON.parse(r.response)),document.cookie="token="+JSON.parse(r.responseText).token,console.log(document.cookie),n(JSON.parse(r.response).login),a()}catch(e){console.error(e)}}else alert("\u043e\u0448\u0438\u0431\u043a\u0430: "+(this.status?this.statusText:"\u0437\u0430\u043f\u0440\u043e\u0441 \u043d\u0435 \u0443\u0434\u0430\u043b\u0441\u044f"))};var o=JSON.stringify({login:this.state.login,password:this.state.password});r.send(o)}},{key:"HandleChange",value:function(e){this.setState({[e.target.name]:e.target.value})}},{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.SendRequest,className:"Authorization"},r.a.createElement("input",{type:"text",name:"login",placeholder:"login",value:this.state.login,onChange:this.HandleChange,className:this.props.type+"__login"}),r.a.createElement("input",{type:"text",name:"password",placeholder:"password",value:this.state.password,onChange:this.HandleChange,className:this.props.type+"__password"}),r.a.createElement("button",null,this.props.forButton))}}]),a}(n.Component),C=Object(p.b)(function(e){return{Decks:e.auth}},function(e){return{Auth:function(){return e({type:"AUTH"})},SetLogin:function(t){return e({type:"SET_LOGIN",payload:t})}}})(v),b=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(s.a)(this,a),t.call(this,e)}return Object(i.a)(a,[{key:"render",value:function(){return this.props.auth.authenticated?r.a.createElement("div",null,"\u0412\u044b \u0437\u0430\u0448\u043b\u0438 \u043f\u043e\u0434 \u043b\u043e\u0433\u0438\u043d\u043e\u043c: ".concat(this.props.auth.login),r.a.createElement("button",{style:{marginLeft:"16px"},onClick:this.props.LogOut},"\u0412\u044b\u0445\u043e\u0434")):r.a.createElement("div",null,r.a.createElement(C,{forButton:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",type:"authorization"}),r.a.createElement(C,{forButton:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",type:"register"}))}}]),a}(r.a.Component),y=Object(p.b)(function(e){return{auth:e.auth}},function(e){return{LogOut:function(){return e({type:"LOG_OUT"})}}})(b),O=a(17);a(115);var k=Object(O.DragSource)("card",{beginDrag:function(e){return{card:e}},endDrag:function(e,t){t.getItem(),t.getDropResult()},canDrag:function(e,t){return e.canDrag}},function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}})(function(e){var t=e.isDragging,a=e.connectDragSource,n=e.connectDragPreview,o=e.canDrag,c=t?.5:1,s=o?a:null,i=o?"d-inline-flex":"d-inline-block",l=o?"none":"display",u=o?"col-md-4":"col-md-6";return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.DragPreviewImage,{connect:n,src:e.img}),r.a.createElement("div",{ref:s,className:"hs_card "+i+" "+u},r.a.createElement("button",{className:"hs_card__button",style:{display:l},onClick:e.deleteCard&&e.deleteCard.bind(this,e.cardIndex)},"delete"),r.a.createElement("img",{style:{opacity:c},src:e.img,alt:""})))}),E=a(60),D=a.n(E),j=(a(125),{}),S=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).getCardSetWinRate=function(e){var t=this;e.preventDefault();var a=new XMLHttpRequest;a.open("POST","/api/v1/Application/getCardPackWinrate",!0),a.send("\u041a\u0430\u0440\u0442\u044b"),a.onreadystatechange=function(e){4===a.readyState&&200===a.status&&t.setState({topWinrate:JSON.parse(a.response)})}},n.state={cardFromProps:null,cards:null,averageOfCardsCost:0,topWinrate:null},n.deleteCard=n.deleteCard.bind(Object(f.a)(n)),n.getCardSetWinRate=n.getCardSetWinRate.bind(Object(f.a)(n)),n.mapCards=n.mapCards.bind(Object(f.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){if(0===this.props.ReduxCards[this.props.ComponentIndex].length){var e=localStorage.getItem("localStorageCardsFor_".concat(this.props.ComponentIndex));if(e)for(var t=0;t<JSON.parse(e).length;t++)this.props.onAddCard(JSON.parse(e)[t],this.props.ComponentIndex);else console.log(this.props)}}},{key:"componentDidUpdate",value:function(e,t,a){console.log(this.props),e.cards!==this.props.cards&&(this.props.onAddCard(this.props.cards[0],this.props.ComponentIndex),localStorage.setItem("localStorageCardsFor_".concat(this.props.ComponentIndex),JSON.stringify(this.props.ReduxCards[this.props.ComponentIndex])),console.log(this.props))}},{key:"componentWillUnmount",value:function(){localStorage.setItem("localStorageCardsFor_".concat(this.props.ComponentIndex),JSON.stringify(this.props.ReduxCards[this.props.ComponentIndex]))}},{key:"deleteCard",value:function(e){this.props.onDeleteCard(e,this.props.ComponentIndex)}},{key:"averageOfCardsCost",value:function(){if(0!==this.props.ReduxCards[this.props.ComponentIndex].length){var e=this.props.ReduxCards[this.props.ComponentIndex].map(function(e,t){return e.card.cost});return console.log(this.props.ReduxCards[this.props.ComponentIndex].map(function(e,t){return e.card.cost}),"reduce"),(e.reduce(function(e,t){return e+t})/e.length).toFixed(2)}}},{key:"mapCards",value:function(){var e=this;return 0!=this.props.ReduxCards[this.props.ComponentIndex]?this.props.ReduxCards[this.props.ComponentIndex].map(function(t,a){return r.a.createElement(k,{deleteCard:e.deleteCard,cardIndex:a,key:t.dbfId,img:t.img,id:t.cardId,name:t.cardName,cost:t.card.cost})}):"\u041f\u0443\u0441\u0442\u043e"}},{key:"mapWinrateDecks",value:function(){return null!==this.state.topWinrate?this.state.topWinrate.map(function(e,t){return r.a.createElement("div",{className:"winrate_deck",key:t},r.a.createElement("a",{href:e.url},e.name)," \u0432\u0438\u043d\u0440\u0435\u0439\u0442: ",e.winrate)}):null}},{key:"render",value:function(){var e=this.props,t=e.canDrop,a=e.isOver,n=e.connectDropTarget,o=t&&a?"#359c4b61":"inherit";return r.a.createElement("div",{ref:n,className:"MyCards col-12"},r.a.createElement("span",null,"\u041c\u043e\u044f \u043a\u043e\u043b\u043e\u0434\u0430"),r.a.createElement("div",{className:"MyCards__result col-12",style:Object.assign({},j,{backgroundColor:o})},this.mapCards()),r.a.createElement("span",null,"\u0441\u0440\u0435\u0434\u043d\u044f\u044f \u0446\u0435\u043d\u0430 \u043a\u0430\u0440\u0442\u044b: ",this.averageOfCardsCost()),r.a.createElement("div",{className:"pt-5"},r.a.createElement("button",{className:"my-3",onClick:this.getCardSetWinRate},"get winrate"),r.a.createElement("div",{className:"winrate_result"},this.mapWinrateDecks())))}}]),a}(r.a.Component),N=Object(p.b)(function(e){return{ReduxCards:e.cards}},function(e){return{onAddCard:function(t,a){e({type:"ADD_CARD",payload:{card:t,index:a}})},onDeleteCard:function(t,a){e({type:"DELETE_CARD",payload:{cardIndex:t,index:a}})}}})(Object(O.DropTarget)("card",{drop:function(e,t){e.Drop(t.getItem())}},function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),canDrop:t.canDrop()}})(S)),_=(a(126),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),n=t.call(this,e),console.log(n.props),n.state={deckLinks:n.props.Decks.map(function(e,t){return r.a.createElement("li",{key:"LinkForMyCards"+(t+1),className:"nav-item"},r.a.createElement(d.b,{to:"/Application/deck_"+(t+1)},t+1))}),mapDeckRoutes:n.props.Decks.map(function(e,t){return r.a.createElement(h.a,{key:"RouteForMyCards_"+(t+1),path:"/Application/deck_"+(t+1),render:function(e){return r.a.createElement(N,{key:"MyCards_"+(t+1),ComponentIndex:t,cards:n.props.cards,canDrag:!1,Drop:n.props.Drop})}})})},n.addDeck=n.addDeck.bind(Object(f.a)(n)),n}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){var n=this;this.props!==e&&this.setState({deckLinks:this.props.Decks.map(function(e,t){return r.a.createElement("li",{key:"deck_"+t+1,className:"nav-item"},r.a.createElement(d.b,{to:"/Application/deck_"+(t+1)},t+1))}),mapDeckRoutes:this.props.Decks.map(function(e,t){return r.a.createElement(h.a,{key:"deck_"+t+1,path:"/Application/deck_"+(t+1),render:function(e){return r.a.createElement(N,{ComponentIndex:t,cards:n.props.cards,canDrag:!1,Drop:n.props.Drop})}})})})}},{key:"addDeck",value:function(){this.props.AddDeck()}},{key:"render",value:function(){return r.a.createElement("div",{className:"col-5 mt-4"},r.a.createElement("ul",{className:"deck__navigation"},this.state.deckLinks,r.a.createElement("li",{className:"nav-item__add-button",onClick:this.addDeck},"+")),r.a.createElement("div",{className:"deck-wrapper"},this.state.mapDeckRoutes))}}]),a}(r.a.Component)),x=Object(p.b)(function(e){return{Decks:e.cards}},function(e){return{AddDeck:function(){return e({type:"ADD_DECK"})}}})(_),A=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).getCardByClass=function(e){var t=this;e.preventDefault();var a=new XMLHttpRequest;a.open("POST","/api/v1/Application/getCards",!0),a.send(this.state.value.charAt(0).toUpperCase()+this.state.value.slice(1).toLowerCase()),a.onreadystatechange=function(e){4===a.readyState&&200===a.status&&t.setState({cards:JSON.parse(a.responseText)})}},n.getCard=function(e){n.setState({cardForMyCards:[e.card,n.state.counter++]})},n.state={counter:0,value:"",cards:null,cardForMyCards:null},n.handleChange=n.handleChange.bind(Object(f.a)(n)),n.getCardByClass=n.getCardByClass.bind(Object(f.a)(n)),n.getCard=n.getCard.bind(Object(f.a)(n)),n}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){t.cards!==this.state.cards&&(this.setState({cards:this.state.cards.sort(function(e,t){return"string"===typeof e.img?-1:1})}),this.setState({cardsToShow:this.state.cards.map(function(e){return r.a.createElement(k,{canDrag:!0,img:void 0===e.img?"https://i.imgur.com/3NrKqzF.png":e.img,cardName:e.name,id:e.dbfId,key:e.dbfId,card:e})})}))}},{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"App__search"},r.a.createElement("input",{type:"text",onChange:this.handleChange,value:this.state.value,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0440\u0430\u0441\u0443, \u043a\u043b\u0430\u0441\u0441 \u0438\u043b\u0438 \u0444\u0440\u0430\u043a\u0446\u0438\u044e \u043a\u0430\u0440\u0442\u044b",className:"col-sm-6 col-md-5"}),r.a.createElement("button",{className:"App__button col-sm-2 col-md-1",onClick:this.getCardByClass},"\u041f\u043e\u0438\u0441\u043a")),r.a.createElement("div",{className:"cards-wrapper col-12"},r.a.createElement("div",{className:"App__result col-7 mt-4"},this.state.cardsToShow),r.a.createElement(x,{className:"col-12",canDrag:!1,cards:this.state.cardForMyCards,Drop:this.getCard})))}}]),a}(r.a.Component),w=Object(O.DragDropContext)(D.a)(A),I=(a(127),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"Chat__wrapper"},r.a.createElement("div",{className:"Chat"},r.a.createElement("div",{className:"Chat__messages"},"\u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f"),r.a.createElement("div",{className:"Chat__wrapperForButtons"},r.a.createElement("input",{className:"Chat__input"}),r.a.createElement("button",{className:"Chat__button"},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")))))}}]),a}(r.a.Component)),R=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.Auth,t=this.props.SetLogin;var a=function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}("token"),n=new XMLHttpRequest;n.open("POST","/api/v1/tokenvalidate",!0),n.setRequestHeader("Content-Type","application/json"),n.onreadystatechange=function(){if(4===this.readyState)if(200===this.status)try{JSON.parse(n.response),t(JSON.parse(n.response).login),e()}catch(a){console.error(a)}else alert("\u043e\u0448\u0438\u0431\u043a\u0430: "+(this.status?this.statusText:"\u0437\u0430\u043f\u0440\u043e\u0441 \u043d\u0435 \u0443\u0434\u0430\u043b\u0441\u044f"))};var r=JSON.stringify({token:a});n.send(r)}},{key:"render",value:function(){return r.a.createElement(d.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(m,null),r.a.createElement(h.a,{path:"/Home",component:g}),r.a.createElement(h.a,{path:"/Logg",component:y}),r.a.createElement(h.a,{path:"/Application",component:w}),r.a.createElement(h.a,{path:"/Chat",component:I})))}}]),a}(r.a.Component),T=Object(p.b)(function(e){return{Auth:e.auth}},function(e){return{Auth:function(){return e({type:"AUTH"})},SetLogin:function(t){return e({type:"SET_LOGIN",payload:t})}}})(R),L=a(16),H=a(23),J=[[]],M=a(18),F={authenticated:!1,login:""},W="AUTH",q="LOG_OUT",U="SET_LOGIN",P=Object(L.createStore)(Object(L.combineReducers)({cards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_DECK":return e.push([]),Object(H.a)(e);case"ADD_CARD":return e[t.payload.index]=[].concat(Object(H.a)(e[t.payload.index]),[t.payload.card]),Object(H.a)(e);case"DELETE_CARD":return e[t.payload.index].splice(t.payload.cardIndex,1),Object(H.a)(e);default:return Object(H.a)(e)}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W:return Object(M.a)(Object(M.a)({},e),{},{authenticated:!0});case q:return Object(M.a)(Object(M.a)({},e),{},{authenticated:!1});case U:return Object(M.a)(Object(M.a)({},e),{},{login:t.payload});default:return Object(M.a)({},e)}}}));c.a.render(r.a.createElement(p.a,{store:P},r.a.createElement(T,null)),document.getElementById("root"))},61:function(e,t,a){e.exports=a(128)},66:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){}},[[61,1,2]]]);
//# sourceMappingURL=main.cba049d4.chunk.js.map